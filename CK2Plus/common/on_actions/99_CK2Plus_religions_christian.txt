###########################
# TIME PERIODS
###########################

on_startup = {
	events = {
		schismPlus.001 # Set up Great Schism scenarios
	}
}

on_chronicle_start = {

}

on_yearly_pulse = {
	events = {
		Plus.2025 # Brother Angelo criticizes the Pope
		Plus.2030 # The Poor of Lyons appear
		Plus.2113 # Formalization of Bogomilism ends
		Plus.2111 # Initialization event for Bogomilist laws
		Plus.2102 # Constantine V's return
		Plus.2105 # Paulicians spread in the Byzantine Empire due to effective patriarch

		Plus.1555 # Sainthood Failure - Ambition Abandoned
		Plus.1556 # Sainthood Success - Ambition Completed
	}

	random_events = {
		# Heretic Pride Events
		75 = Plus.2003 # Adult Cathar becomes celibate
		100 = Plus.2037 # Refugees arrive at a Waldensian ruler's capital
		100 = Plus.2038 # Waldensian ruler is greedy
		100 = Plus.2039 # Charitable Waldensian steward sees chance to help the poor

		lollard = {
			1 = 0

			1 = Plus.2015 # John Wycliff appears in England
		}

		cathar = {
			1 = 0

			1 = Plus.2010 # Council of Saint-FÃ©lix
		}

		apostolic = {
			2 = 0

			1 = Plus.2063 # Birth of the Order of Saint Blaise
		}

		nestorian = {
			12 = 0

			1 = Plus.3600 # Nestorian Levant becomes Assyrian
			1 = Plus.3602 # Assyrian character stops being Nestorian
		}

		bogomilist = {
			100 = Plus.2138 # # Bogomilist missionaries move into a neighboring realm
		}

		sainthood_ambition = {
			28 = 0

			# 20 years -> 1
			# 200 months -> 2
			# 100 months -> 4
			# 50 months -> 8
			# 25 months -> 16

			4 = Plus.2611 # Build a church in a local town?
			4 = Plus.2612 # Administering the sick
			8 = Plus.2613 # The sick believe you can heal them
			8 = Plus.2614 # Visiting a remote ascetic
			2 = Plus.2615 # Take monastic vows?
			4 = Plus.2616 # You have too much wealth
			16 = Plus.2617 # The stigmata
			4 = Plus.2618 # Support of a priest
			4 = Plus.2619 # A priest doubts you
			4 = Plus.2622 # High piety
			4 = Plus.2623 # Exceptional learning
			4 = Plus.2624 # Exceptional diplomacy
			4 = Plus.2625 # Exceptional martial
			4 = Plus.2626 # Homosexual/Lustful/Hedonist/Seducer/Seductress
			4 = Plus.2627 # Gluttunous
			4 = Plus.2628 # Greedy
			4 = Plus.2629 # Slothful
			4 = Plus.2630 # Envious
			4 = Plus.2631 # Cruel
			4 = Plus.2632 # Wroth
			4 = Plus.2633 # Proud
			4 = Plus.2634 # Deceitful
			4 = Plus.2635 # Ambitious
			4 = Plus.2636 # Arbitrary
			4 = Plus.2639 # Mystic
			4 = Plus.2640 # Impaler
			4 = Plus.2641 # Chaste
			4 = Plus.2642 # Celibate
			4 = Plus.2643 # Charitable
			4 = Plus.2644 # Kind
			4 = Plus.2645 # Humble
			4 = Plus.2646 # Honest
			4 = Plus.2647 # Just
			4 = Plus.2648 # Theologian
			8 = Plus.2649 # Voice of Jesus
			16 = Plus.1550 # Stressed
			16 = Plus.1551 # Depressed
			4 = Plus.1552 # Drunkard
			1 = Plus.1553 # Ambition progress
			1 = Plus.1554 # Ambition setback
		}
	}
}

# For characters older than AGE_CHILDHOOD_PULSE but not an adult as defined by ADULT_AGE_FEMALE and ADULT_AGE_MALE
on_yearly_childhood_pulse = {
	random_events = {
		#Age 6-16, aiming to get at least 4 traits before adult.
		500 = Plus.2000 # Cathar child gains chaste
		500 = Plus.2040 # Waldensian child gains charitable
	}
}

on_bi_yearly_pulse = {
	random_events = {
		fraticelli = {
			100 = 0 # No event
			5 = Plus.2027 # Catholic faithful consider the Fraticelli heresy
		}

		bogomilist = {
			50 = Plus.2114 # Bogomilist Formalization: Support Common Liturgy
			50 = Plus.2115 # Bogomilist Formalization: Canonicalize Bible
			50 = Plus.2116 # Bogomilist Formalization: Church Councils
			50 = Plus.2118 # Bogomilist Formalization: Seminary Schools
			50 = Plus.2120 # Bogomilist Formalization: Endorsed by Priest
			50 = Plus.2121 # Bogomilist Formalization: Public Speech
			50 = Plus.2122 # Bogomilist Formalization: Ruler Writes Text
			50 = Plus.2123 # Bogomilist Formalization: Troublemaker Sect
			50 = Plus.2124 # Bogomilist Formalization: Traditionalist Revival
			50 = Plus.2125 # Bogomilist Formalization: Demand For Reversal
			50 = Plus.2126 # Bogomilist Formalization: Blamed by Priest
			50 = Plus.2127 # Bogomilist Formalization: Learned Priest Objects
		}
	}
}

on_five_year_pulse = {
	random_events = {
		cathar_child_homosexual = {
			16 = 0

			1 = Plus.2001 # Cathar male child becomes homosexual
			1 = Plus.2002 # Cathar female child becomes homosexual
		}
	}
}

on_decade_pulse = {
	random_events = {
		waldensian = {
			9 = 0

			1 = Plus.2032 # The first Waldensian king
		}

		acheiropoieta = {
			7 = 0

			1 = Plus.2100 # Iconoclast ruler has an Orthodox province with acheiropoieta
		}

		bogomil = {
			3 = 0

			2 = Plus.2110 # Bogomil appears in Tyrnovo
		}
	}
}

###########################
# OTHER, ALPHABETICAL ORDER
###########################

on_become_imprisoned_any_reason = {
	events = {
		Plus.2044 # Forced to abandon prayers
	}
}

# ROOT is the baby
on_birth = {
	events = {
		Plus.2004 # Cathar parents lose prestige/piety
		PlusGreatSchism.043 # Assign rites trait
	}
}

on_character_convert_religion = {
	# ROOT is the character after conversion
	# FROM scope has the old religion
	events = {
		Plus.2033 # Hospital removed from province if non-Waldensian
		Plus.2044 # Forced to abandon prayers
		PlusGreatSchism.041 # Choose Chalcedonian rites
		PlusGreatSchism.053 # Update pentarch on held titles
	}
}

on_character_convert_secret_religion = {
	# ROOT is the character after conversion
	# FROM scope has the old religion
	# Note that this fires even when the secret religion is reset or set initially
	events = {
		PlusGreatSchism.054 # Update pentarch on held titles
	}
}

# When the religion changes in a county, ROOT is province. FROM has the old religion.
on_county_religion_change = {
	events = {
		PlusGreatSchism.057 # Update pentarch on province after religion change
	}
}

# ROOT is the creating character, FROM is the title
on_create_title = {
	events = {
		# PlusGreatSchism.052 # Update pentarch on title # TODO:Create similar event that doesn't realy on FROMFROM
	}
}

on_death = {
	events = {
		Plus.2601 # Check for chance of sainthood
		Plus.2019 # Lollard ruler dies while Bible is being translated
	}
}

# Triggers when a change of host has been detected. Note that the FROM scope is empty for newly created characters. "on_employer_change" is triggered first if a character has had both their employer and host changed since the last check was made.
# ROOT is the character that got a new host
# FROM is the previous host
# FROMFROM is new employer
on_host_change = {
	events = {
		PlusGreatSchism.044 # Assign rites trait to generated characters
	}
}

# ROOT is the title holder, FROM is the title, FROMFROM is the old holder
on_new_holder = {
	events = {
		PlusGreatSchism.052 # Update pentarch on title
		PlusGreatSchism.058 # Pentarch re-established
		PlusGreatSchism.059 # Pentarch disestablished
		PlusGreatSchism.045 # Assign rites trait to generated characters when granting away baronies by right-click
		Plus.2111 # Initialization event for Bogomilist laws
	}
}

# ROOT is the character, FROM is the title, FROMFROM is the old holder
on_new_holder_inheritance = {
	events = {
		PlusGreatSchism.052 # Update pentarch on title
		PlusGreatSchism.058 # Pentarch re-established
		PlusGreatSchism.059 # Pentarch disestablished
		PlusGreatSchism.046 # Assign rites trait to generated characters when titles with open elective are inherited
		Plus.2111 # Initialization event for Bogomilist laws
	}
}

# ROOT is the character, FROM is the title, FROMFROM is the old holder
on_new_holder_usurpation = {
	events = {
		PlusGreatSchism.052 # Update pentarch on title
		PlusGreatSchism.058 # Pentarch re-established
		PlusGreatSchism.059 # Pentarch disestablished
		Plus.2111 # Initialization event for Bogomilist laws
	}
}

on_major_battle_lost_leader = {
	# Losing army leader ROOT - opponent army leader is FROM
	random_events = {
		bogomilist = {
			900 = 0
			100 = Plus.2129 # Bogomilist Formalization: Major Battle Lost
		}
	}
}

on_major_battle_won_leader = {
	# Winning army leader is ROOT - opponent army leader is FROM
	random_events = {
		bogomilist = {
			900 = 0
			100 = Plus.2128 # Bogomilist Formalization: Major Battle Won
		}
	}
}

# Fires for the owner of the winning unit (ROOT). The taken Holding title is in FROM.
on_siege_over_winner = {
	events = {
		Plus.2035 # Christian holy site is sacked by Waldensians
	}

	random_events = {
		50 = Plus.2016 # Lollard/Paulician/Iconoclast wins siege over a Christian temple
		50 = Plus.2034 # Waldensian wins siege over a Christian temple
	}
}

# FROMFROM is the demander. FROM is the vassal. ROOT is the character. Fires for the vassal and each of his courtiers and vassals.
on_vassal_accepts_religious_conversion = {
	effect = {
	#	set_pentarch_choice_CK2Plus_effect = yes # Always fires before vanilla event 39700
	}
	events = {
	}
}

# From = Attacker, Root = Defender
on_war_started = {
	events = {
		Plus.2011 # Cathars are allowed to use holy wars once Catholic holy war is used against them
		PlusGreatSchism.072 # Carolingian/HRE Emperor fights the Byzantine Empire
	}
}

###########################
# DIPLOMATIC NOTIFICATIONS
###########################

# FROM is the character recieving the event
# FROMFROM is the person sending the event
# ROOT is empty or a third party
# new_character is empty or a third party
# Starting scope is equal to FROMFROM

OFFER_VASSALIZATION_INTERACTION_ACCEPT_EVENT = {
	events = {
		PlusGreatSchism.055 # Update pentarch on titles of new vassal's realm
	}
}

ASK_FOR_VASSALIZATION_INTERACTION_ACCEPT_EVENT = {
	events = {
		PlusGreatSchism.056 # Update pentarch on titles of new vassal's realm
	}
}

TRANSFER_VASSAL_INTERACTION_ACCEPT_EVENT = {
	events = {
		# Check if transferred from non-autocephalous realm to autocephalous realm, adjust pentarch assignment accordingly?
	}
}

RELEASE_VASSAL_INTERACTION_ACCEPT_EVENT = {
	events = {
		# Apply autocephalous if a king is granted independence from an empire without autocephalous patriarchs?
	}
}
